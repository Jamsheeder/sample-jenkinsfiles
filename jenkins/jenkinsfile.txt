pipeline {
	agent any

    environment {
        SAM_SAMPARAM = "${params.SamParam}"
    }

	stages {
	   stage('Preparation') { // for display purposes
	   
	      steps {
		      // Get some code from a GitHub repository
		      git 'https://github.com/Jamsheeder/sample-jenkinsfiles.git'
		  }
	   }
	   stage('Build') {
	   
	      when {
	          expression { isUnix() == false }
	      }
	      steps {
		         bat "./gradlew clean build"
		         bat "set"
		         echo 'SamParam'
		         echo "${params.SamParam}"
		         echo "${SamParam}"
		         echo "${SAM_SAMPARAM}"
		         echo "${env.SAM_SAMPARAM}"
		  }
		  
	   }
	}
	post {
	  always {
	      echo 'post -> always'
	      step([$class: 'Publisher', reportFilenamePattern: '**/testng-results.xml'])
	  }
	  failure {
	      echo 'post -> failure'
	  }
    }
}